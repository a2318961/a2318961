import{d as B,b as g}from"./utils.9c2aab6f.js";import{_ as y,L as x}from"./Line.14e69e34.js";import{_ as S}from"./plugin-vue_export-helper.21dcd24c.js";const $={class:"line-search-wrap"},w={key:0,class:"search-list"},L={key:0},E={setup(I){const u=Vue.ref(!1),c=Vue.ref(!1),r=Vue.ref(""),n=Vue.ref(""),s=Vue.ref(""),i=Vue.ref("");VueRouter.useRouter();const t=Vue.ref([]),V=Vue.ref(null),p=e=>{n.value=e.lineId,s.value=e.lineNo,i.value=`${e.startStopName} -> ${e.endStopName}`,v()},_=()=>{u.value=!0,Vue.nextTick(()=>{V.value.focus()})},v=()=>{u.value=!1,t.value=[],r.value=""},h=B(e=>{if(!e||e.length<1){t.value=[];return}g(e).then(o=>{const{lines:a=[]}=o.data.data;t.value=a.splice(0,10)})},800),m=e=>{c.value=e},k=()=>{console.log("handleExchange",n.value);const[e,o,a]=n.value.split("-");n.value=`${e}-${o}-${+!+a}`};return(e,o)=>{const a=Vue.resolveComponent("van-icon"),f=Vue.resolveComponent("van-nav-bar"),d=Vue.resolveComponent("van-search"),C=Vue.resolveComponent("van-cell"),N=Vue.resolveComponent("van-overlay");return Vue.openBlock(),Vue.createElementBlock("div",$,[Vue.createVNode(f,{title:"\u7EBF\u8DEF\u67E5\u8BE2"},{right:Vue.withCtx(()=>[n.value&&!c.value?(Vue.openBlock(),Vue.createBlock(a,{key:0,style:{"margin-right":"15px"},onClick:k,name:"exchange",size:"18"})):Vue.createCommentVNode("",!0),n.value&&!c.value?(Vue.openBlock(),Vue.createBlock(y,{key:1,line:{lineId:n.value,lineNo:s.value,lineDirection:i.value}},null,8,["line"])):Vue.createCommentVNode("",!0)]),_:1}),Vue.withDirectives(Vue.createVNode(d,{placeholder:"\u8BF7\u8F93\u5165\u641C\u7D22\u5173\u952E\u8BCD",readonly:"",onClick:_},null,512),[[Vue.vShow,!u.value]]),Vue.createVNode(N,{"lock-scroll":!1,show:u.value,onClick:v},{default:Vue.withCtx(()=>[Vue.createElementVNode("div",{class:"search-box",onClick:o[1]||(o[1]=Vue.withModifiers(()=>{},["stop"]))},[Vue.createVNode(d,{ref_key:"search",ref:V,modelValue:r.value,"onUpdate:modelValue":[o[0]||(o[0]=l=>r.value=l),Vue.unref(h)],placeholder:"\u8BF7\u8F93\u5165\u641C\u7D22\u5173\u952E\u8BCD"},null,8,["modelValue","onUpdate:modelValue"]),t.value.length>0?(Vue.openBlock(),Vue.createElementBlock("div",w,[(Vue.openBlock(!0),Vue.createElementBlock(Vue.Fragment,null,Vue.renderList(t.value,l=>(Vue.openBlock(),Vue.createBlock(C,{key:l.lineId,title:`${l.lineNo} ${l.startStopName}->${l.endStopName}`,onClick:b=>p(l)},null,8,["title","onClick"]))),128))])):Vue.createCommentVNode("",!0)])]),_:1},8,["show"]),n.value?(Vue.openBlock(),Vue.createElementBlock("div",L,[Vue.createVNode(x,{isComponent:!0,lineId:n.value,onGetStatus:m},null,8,["lineId"])])):Vue.createCommentVNode("",!0)])}}};var z=S(E,[["__scopeId","data-v-25f43036"]]);export{z as default};
